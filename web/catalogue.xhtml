<!-- <h:form>
		<p:dataTable var="product" value="#{catalogueBean.products}">
			<p:column headerText="Name">
				<h:outputText value="#{product.name}" />
			</p:column>
			<p:column headerText="Picture">
				<h:graphicImage value="#{product.picture}" />
			</p:column>
			<p:column headerText="Price">
				<h:outputText value="#{product.unitPrice}" />
			</p:column>
			<p:column headerText="Units">
				<h:outputText value="#{product.units}" />
			</p:column>
		</p:dataTable>
	</h:form> -->

<ui:composition xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/common.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<ui:param name="pageName" value="Products" />
	<ui:define name="content">
		<h:form id="catalogue-search-sort">
			<h:panelGrid columns="4">
				<p:outputLabel value="Sort by"/>
				<p:selectOneMenu>
					<f:selectItem itemLabel="Name asc" itemValue="name-asc" />
					<f:selectItem itemLabel="Name desc" itemValue="name-asc" />
					<f:selectItem itemLabel="Price asc" itemValue="name-asc" />
					<f:selectItem itemLabel="Price desc" itemValue="name-asc" />
				</p:selectOneMenu>
				<p:outputLabel value="Search"/>
				<p:inputText />
			</h:panelGrid>
		</h:form>
		<h:form id="catalogue-form">
			<p:dataList value="#{catalogueBean.products}" var="p"
				id="product-list" paginator="true" rows="5" type="none">
				<h:panelGrid columns="3" cellpadding="5">
					<h:graphicImage style="max-width: 200px;
max-height: 200px;"
						value="#{p.picture}" styleClass="product-list-image" />
					<h:panelGrid columns="1" cellpadding="5">
						<h:outputText value="#{p.name}" />
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel value="Price" for="productPrice" />
							<h:outputText id="productPrice"
								value="#{p.priceRetail}/#{p.priceWholesale} $" />

							<h:outputLabel value="Units" for="productUnits" />
							<h:outputText id="productUnits" value="#{p.units}" />
						</h:panelGrid>
					</h:panelGrid>
					<p:commandButton oncomplete="PF('cartDialog').show()"
						title="Add to cart" update=":cartForm" icon="ui-icon-cart"
						rendered="#{!cartBean.productList().contains(p) and userBean.currentUser.role == 'COMPANY'}">
						<f:setPropertyActionListener target="#{cartBean.selectedProduct}"
							value="#{p}" />
						<f:setPropertyActionListener target="#{cartBean.quantity}"
							value="1" />
					</p:commandButton>
				</h:panelGrid>
				<hr />
			</p:dataList>
		</h:form>
		<p:dialog header="Add to Cart" widgetVar="cartDialog" modal="true"
			resizable="false">
			<h:form id="cartForm">
				<h:panelGrid columns="2">
					<h:outputLabel value="Name:" />
					<h:outputText value="#{cartBean.selectedProduct.name}" />
					<h:outputLabel value="Quantity:" />
					<p:spinner value="#{cartBean.quantity}" min="1" max="1000000" />
				</h:panelGrid>
				<div style="margin-top: 10px;"></div>
				<p:commandButton actionListener="#{cartBean.add}" value="Add"
					ajax="true" oncomplete="PF('cartDialog').hide()"
					update=":catalogue-form" style="float: right;" />
			</h:form>
		</p:dialog>
	</ui:define>
</ui:composition>
